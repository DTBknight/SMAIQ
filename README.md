# Car Price Calculator - Model Search Function

## Project structure

```
├── V2.html              # 前端页面
├── server.js            # 后端服务器
├── package.json         # 项目依赖
└── README.md           # 项目说明
```

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动后端服务

```bash
npm start
```

或者开发模式（自动重启）：
```bash
npm run dev
```

### 3. 访问前端页面

直接在浏览器中打开 `V2.html` 文件，或者使用本地服务器：

```bash
# 使用Python
python -m http.server 8080

# 使用Node.js
npx http-server -p 8080
```

然后访问 `http://localhost:8080/V2.html`

## 功能说明

### 车型搜索功能

1. **实时搜索**：在车型名称输入框中输入2个字符以上时，自动搜索相关车型
2. **智能匹配**：支持品牌名、车型名搜索
3. **自动填充**：点击搜索结果可自动填充车型名称和指导价
4. **图片显示**：显示车型图片（如果可用）

### API接口

- `GET /api/search-car?keyword=关键词` - 搜索车型（抓取懂车帝）
- `GET /api/search-car-fallback?keyword=关键词` - 备用搜索（静态数据）
- `GET /health` - 健康检查

### 技术特点

- **Puppeteer爬虫**：使用无头浏览器抓取懂车帝数据
- **备用方案**：当爬虫失败时使用静态数据
- **防抖搜索**：避免频繁请求
- **错误处理**：完善的错误处理机制

## 注意事项

1. **法律合规**：请确保遵守懂车帝网站的使用条款
2. **请求频率**：避免过于频繁的请求，建议添加请求间隔
3. **数据准确性**：爬虫数据可能不准确，建议人工验证
4. **服务稳定性**：网站结构变化可能导致爬虫失效

## 扩展建议

1. **缓存机制**：添加Redis缓存减少重复请求
2. **数据验证**：增加数据准确性验证
3. **更多数据源**：集成其他汽车网站数据
4. **用户反馈**：添加搜索结果反馈机制

## 故障排除

### 常见问题

1. **搜索无结果**：检查网络连接和后端服务状态
2. **图片不显示**：可能是跨域问题，需要配置代理
3. **服务启动失败**：检查端口是否被占用

### 调试方法

1. 查看浏览器控制台错误信息
2. 检查后端服务日志
3. 测试API接口：`curl http://localhost:3000/api/search-car?keyword=特斯拉` 
